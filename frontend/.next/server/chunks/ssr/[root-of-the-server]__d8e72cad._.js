module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},53250,a=>{"use strict";let b={getItem:a=>null,setItem(a,b){},removeItem(a){}};function c(a){if(!a)return null;let b=a.trim();return b&&"undefined"!==b&&"null"!==b?b:null}async function d(a,e={}){let f=c(b.getItem("token")),g={"Content-Type":"application/json",...e.headers};f&&(g.Authorization=f);try{let b=await fetch(`http://localhost:8000${a}`,{...e,headers:g});if(!b.ok){let a=await b.json().catch(()=>({}));throw Error(a.message||`API error: ${b.status}`)}return b}catch(a){throw a}}a.s(["alertsAPI",0,{async getWatchlist(){let a=await d("/alerts/watchlist"),b=await a.json();if(Array.isArray(b))return b.map(a=>"string"==typeof a||"number"==typeof a?String(a):String(a?.neoId||a?.asteroidId||a?.id||"")).filter(a=>a.length>0);let c=b?.watchlist||b?.watched||b?.ids||b?.neoIds||[];return Array.isArray(c)?c.map(a=>"string"==typeof a||"number"==typeof a?String(a):String(a?.neoId||a?.asteroidId||a?.id||"")).filter(a=>a.length>0):[]},addToWatchlist:async(a,b=2e7,c=7)=>(await d("/alerts/watch",{method:"POST",body:JSON.stringify({neoId:a,alertDistanceKm:b,alertDaysBefore:c})})).json(),removeFromWatchlist:async a=>(await d(`/alerts/unwatch/${a}`,{method:"POST"})).json(),getNotifications:async()=>(await d("/alerts/notifications")).json(),markNotificationRead:async a=>(await d(`/alerts/notifications/${a}/read`,{method:"POST"})).json()},"chatAPI",0,{getChannels:async()=>(await d("/chat/channels")).json(),async getMessages(a={}){let b=new URLSearchParams;a.neoId&&b.set("neoId",a.neoId),a.limit&&b.set("limit",String(a.limit));let c=b.toString();return(await d(`/chat/messages${c?`?${c}`:""}`)).json()},sendMessage:async a=>(await d("/chat/messages",{method:"POST",body:JSON.stringify(a)})).json()},"dataHelpers",0,{getHazardLevel(a){if(!a.close_approach_data||0===a.close_approach_data.length)return"low";let b=a.close_approach_data[0].miss_distance?.kilometers?parseFloat(a.close_approach_data[0].miss_distance.kilometers):1/0,c=a.estimatedDiameter?.kilometers?.estimated_diameter_max||0;return a.is_potentially_hazardous_asteroid&&b<2e7?"high":b<5e7&&c>100?"medium":"low"},formatDistance(a){let b="string"==typeof a?parseFloat(a):a;return`${(b/1e6).toFixed(2)} M km`},formatVelocity(a){let b="string"==typeof a?3600*parseFloat(a):3600*a;return`${(b/3600).toFixed(2)} km/s`},formatDiameter:a=>`${a.toFixed(2)} km`,parseApproachDate:a=>new Date(a),getNextCloseApproach:a=>a&&0!==a.length?a[0]:null},"feedAPI",0,{async getAll(){let a=await d("/feed"),b=await a.json(),c=[];return Array.isArray(b)?c=b:b&&Array.isArray(b.near_earth_objects)&&(c=b.near_earth_objects),{near_earth_objects:c.map(a=>({id:a.id||a.neoId||String(a.id),name:a.name||a.full_name||a.designation||"Unknown",estimatedDiameter:{kilometers:{estimated_diameter_min:a.estimated_diameter_min||a.diameter_km||0,estimated_diameter_max:a.estimated_diameter_max||a.diameter_km||a.estimated_diameter||0}},close_approach_data:[{miss_distance:{kilometers:a.miss_distance_km||a.close_approach_km||a.miss_distance&&a.miss_distance.kilometers||"0"},relative_velocity:{kilometers_per_second:a.velocity_kms||a.relative_velocity&&a.relative_velocity.kilometers_per_second||"0"}}],is_potentially_hazardous_asteroid:!0===a.hazardous||!0===a.is_potentially_hazardous_asteroid||"true"===a.hazardous,__raw:a}))}},async getById(a){let b=await d(`/feed/${a}`),c=await b.json(),e=(Array.isArray(c)?c:c?.near_earth_objects||[]).find(b=>String(b.id)===String(a)||String(b.neoId)===String(a));return e?{id:e.id||e.neoId||String(e.id),name:e.name||e.full_name||"Unknown",estimatedDiameter:{kilometers:{estimated_diameter_min:e.estimated_diameter_min||e.diameter_km||0,estimated_diameter_max:e.estimated_diameter_max||e.diameter_km||e.estimated_diameter||0}},close_approach_data:[{miss_distance:{kilometers:e.miss_distance_km||"0"},relative_velocity:{kilometers_per_second:e.velocity_kms||"0"}}],is_potentially_hazardous_asteroid:!0===e.hazardous||!0===e.is_potentially_hazardous_asteroid,__raw:e}:null}},"storageHelpers",0,{setToken(a){let d=c(a);d?b.setItem("token",d):b.removeItem("token")},getToken:()=>c(b.getItem("token")),setUserId(a){b.setItem("userId",a)},getUserId:()=>b.getItem("userId"),clearAuth(){b.removeItem("token"),b.removeItem("userId")},isAuthenticated(){return!!this.getToken()}}])},64457,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130);function e({alerts:a=[],onDismiss:e,autoOpenOnNew:f=!1}){let[g,h]=(0,c.useState)(!1),i=(0,c.useRef)(0),j={low:"bg-secondary/20 text-secondary border-secondary/30",medium:"bg-accent/20 text-accent border-accent/30",high:"bg-destructive/20 text-destructive border-destructive/30"},k={low:"ðŸ“¢",medium:"âš ï¸",high:"ðŸš¨"},l={approach:"Close Approach",hazard:"Hazard Alert",update:"Data Update"},m=a.filter(a=>!a.read).length;return(0,c.useEffect)(()=>{f&&(m>i.current&&h(!0),i.current=m)},[m,f]),(0,b.jsx)("div",{className:"fixed bottom-6 right-6 z-50",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[g&&(0,b.jsxs)(d.Card,{className:"border-primary/20 bg-card/90 backdrop-blur w-80 shadow-2xl",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-lg",children:"Alerts"}),(0,b.jsx)(d.CardDescription,{children:"Recent notifications"})]}),(0,b.jsx)("button",{onClick:()=>h(!1),className:"text-muted-foreground hover:text-foreground transition-colors",children:"âœ•"})]})}),(0,b.jsx)(d.CardContent,{className:"space-y-3 max-h-96 overflow-y-auto",children:0===a.length?(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8 text-sm",children:"No alerts"}):a.map(a=>(0,b.jsxs)("div",{className:`p-3 rounded-lg border space-y-2 ${a.read?"border-border/50 bg-background/30":`border-l-4 ${j[a.severity]}`}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsxs)("div",{className:"flex items-start gap-2 flex-1",children:[(0,b.jsx)("span",{className:"text-lg mt-0.5",children:k[a.severity]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground truncate",children:a.asteroidName}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:l[a.type]})]})]}),!a.read&&(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary mt-1.5 shrink-0"})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground leading-relaxed",children:a.message}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border/30",children:[(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground",children:a.timestamp.toLocaleTimeString()}),e&&(0,b.jsx)("button",{onClick:()=>e(a.id),className:"text-[10px] text-primary hover:text-secondary transition-colors",children:"Dismiss"})]})]},a.id))})]}),(0,b.jsx)("button",{onClick:()=>h(!g),className:`flex items-center justify-center gap-2 w-14 h-14 rounded-full font-semibold transition-all shadow-lg ${m>0?"bg-gradient-to-br from-primary to-secondary text-foreground hover:from-primary/90 hover:to-secondary/90":"bg-primary/40 text-primary border border-primary/30 hover:bg-primary/30"}`,children:m>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ””"}),(0,b.jsx)("span",{className:"text-xs font-bold w-5 h-5 rounded-full bg-destructive text-destructive-foreground flex items-center justify-center",children:m>9?"9+":m})]}):(0,b.jsx)("span",{className:"text-lg",children:"ðŸ””"})})]})})}var f=a.i(53250);function g(){let[a,d]=(0,c.useState)([]);(0,c.useEffect)(()=>{let a,b=!0,c=async()=>{if(f.storageHelpers.getToken())try{let a=await f.alertsAPI.getNotifications(),c=Array.isArray(a?.notifications)?a.notifications:[];if(!b)return;d(c)}catch(a){}};return c(),a=window.setInterval(c,3e4),()=>{b=!1,a&&window.clearInterval(a)}},[]);let g=(0,c.useMemo)(()=>a.filter(a=>!a.isRead).map(a=>{let b=function(a){let b=a.match(/risk level for asteroid\s+(.+?)\s+is\s+(low|medium|high)/i);if(b)return{asteroidName:b[1].trim(),type:"hazard",severity:b[2].toLowerCase()};let c=a.match(/Asteroid\s+(.+?)\s+(is within|will pass)/i);return c?{asteroidName:c[1].trim(),type:"approach",severity:"medium"}:{asteroidName:"Unknown Asteroid",type:"update",severity:"low"}}(a.message);return{id:a.id,asteroidName:b.asteroidName,type:b.type,severity:b.severity,message:a.message,timestamp:new Date(a.createdAt),read:a.isRead}}),[a]),h=async a=>{try{await f.alertsAPI.markNotificationRead(a),d(b=>b.map(b=>b.id===a?{...b,isRead:!0}:b))}catch(a){}};return(0,b.jsx)(e,{alerts:g,onDismiss:h,autoOpenOnNew:!0})}a.s(["default",()=>g],64457)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d8e72cad._.js.map